<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PlateVault DXB</title>
  <link rel="stylesheet" href="./style.css" />

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import {
      getFirestore, collection, addDoc, getDocs, query, orderBy, limit,
      serverTimestamp, doc, updateDoc, deleteDoc
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
    import {
      getStorage, ref as sRef, uploadBytes, getDownloadURL, deleteObject
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";

    window.firebaseImports = {
      initializeApp, getFirestore, collection, addDoc, getDocs, query, orderBy, limit,
      serverTimestamp, doc, updateDoc, deleteDoc,
      getStorage, sRef, uploadBytes, getDownloadURL, deleteObject
    };
  </script>
</head>

<body>
  <header class="top">
    <div class="brand">
      <div class="appIcon"></div>
      <div class="brandText">
        <div class="appName">PlateVault DXB</div>
        <div class="appSub">Private license plate catalog · Netlify</div>
      </div>
    </div>

    <div class="topRight">
      <div class="userPill" id="userPill">
        <span class="dot"></span>
        <span id="userName">Anon#1853</span>
        <span class="muted">(Anonymous)</span>
      </div>
      <button class="btnGold" id="btnOpenAdd">+ Add</button>
    </div>
  </header>

  <main class="wrap">
    <section class="filterBar">
      <div class="searchRow">
        <input id="q" class="search" placeholder="Search plate, code, emirate…" />
        <select id="sort" class="select">
          <option value="new" selected>Newest</option>
          <option value="old">Oldest</option>
        </select>

        <div class="viewToggle">
          <button id="btnGrid" class="toggle on">Grid</button>
          <button id="btnList" class="toggle">List</button>
        </div>
      </div>

      <div class="chipsRow" id="chipsEmirates"></div>
      <div class="chipsRow" id="chipsDigits"></div>
    </section>

    <div class="countRow">
      <div class="muted" id="countText">0 items</div>
    </div>

    <section id="gallery" class="gallery grid"></section>
  </main>

  <nav class="bottomNav">
    <button class="navItem active" data-page="home">Home</button>
    <button class="navItem" data-page="add">Add</button>
    <button class="navItem" data-page="stats">Statistics</button>
    <button class="navItem" data-page="profile">Profile</button>
  </nav>

  <div class="modal" id="addModal" aria-hidden="true">
    <div class="modalCard">
      <div class="modalHead">
        <div>
          <div class="modalTitle">Add car</div>
          <div class="muted small">Upload photo → OCR → review → save to catalog</div>
        </div>
        <button class="iconBtn" id="btnCloseAdd">✕</button>
      </div>

      <div class="modalBody">
        <div class="formGrid">
          <div class="field">
            <label>Emirate</label>
            <select id="addEmirate" class="select">
              <option>Dubai</option>
              <option>Abu Dhabi</option>
              <option>Sharjah</option>
              <option>Ajman</option>
              <option>Ras Al Khaimah</option>
              <option>Fujairah</option>
              <option>Umm Al Quwain</option>
            </select>
          </div>

          <div class="field">
            <label>Photo</label>
            <input type="file" id="addFile" accept="image/*" />
          </div>
        </div>

        <div class="previewRow">
          <img id="addPreview" class="previewImg" alt="preview" />
          <div class="previewMeta">
            <div class="pill" id="addStatus">Ready</div>

            <div class="field">
              <label>Result (you can edit)</label>
              <input id="addPlate" class="input" placeholder="e.g. H 6403" />
            </div>

            <div class="field">
              <label>Code (letter) – optional</label>
              <input id="addCode" class="input" placeholder="e.g. H / N / U / J" />
            </div>

            <div class="field">
              <label>Digits only</label>
              <input id="addDigits" class="input" placeholder="e.g. 6403" />
            </div>

            <label class="checkLine">
              <input type="checkbox" id="addNeedsReview" />
              Needs review
            </label>

            <div class="actions">
              <button class="btn" id="btnDoOcr">OCR</button>
              <button class="btnGold" id="btnSave">Save</button>
            </div>

            <details class="details">
              <summary>OCR candidates</summary>
              <pre id="addCandidates">[]</pre>
            </details>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="./app.js"></script>
</body>
</html>
